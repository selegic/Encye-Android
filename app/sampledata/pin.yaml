paths:

  /api/v1/pins/pin:
    post:
      tags:
        - Pins
      summary: Pin an item (Post / Article / VideoFile)
      description: Allows a creator to pin one of their own items. Max 3 pins allowed.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PinRequest"
      responses:
        "200":
          description: Item pinned successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PinSuccessResponse"
        "401":
          description: Error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/v1/pins/unpin:
    delete:
      tags:
        - Pins
      summary: Unpin an item
      description: Removes an item from the user's pinned list.
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PinRequest"
      responses:
        "200":
          description: Item unpinned successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PinSuccessResponse"
        "401":
          description: Error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /api/v1/pins:
    get:
      tags:
        - Pins
      summary: Get user's pinned items
      description: Fetches all pinned items for the logged-in user ordered by item creation date.
      security:
        - bearerAuth: []
      responses:
        "200":
          description: List of pinned items
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/GetPinsResponse"
        "401":
          description: Error occurred
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"


components:

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:

    PinRequest:
      type: object
      required:
        - itemId
        - onModel
      properties:
        itemId:
          type: string
          example: "67a25eb45f1e915d68b5e21c"
        onModel:
          type: string
          enum: ["Post", "Article", "VideoFile"]
          example: "Post"

    PinSuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        msg:
          type: string
          example: "Item pinned successfully!"

    GetPinsResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        msg:
          type: string
          example: "Pinned items fetched successfully!"
        data:
          type: array
          items:
            $ref: "#/components/schemas/Pin"

    Pin:
      type: object
      properties:
        _id:
          type: string
          example: "67a34ff45e1b871d1a3dc74e"
        user:
          type: string
          example: "67a2341c912834abc123fad3"
        itemId:
          type: string
          example: "67a12ab45f1e915d68b5e21c"
        onModel:
          type: string
          enum: ["Post", "Article", "VideoFile"]
          example: "VideoFile"
        itemCreatedAt:
          type: string
          format: date-time
          example: "2025-02-12T14:35:20.000Z"
        createdAt:
          type: string
          format: date-time
          example: "2025-02-13T08:15:45.000Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-02-13T08:15:45.000Z"

    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        msg:
          type: string
          example: "Error Occoured!"
        error:
          type: string
          example: "Unauthorized Access!"

